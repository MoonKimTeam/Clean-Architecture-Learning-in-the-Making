# 아키텍처 경계 강제하기

## 경계와 의존성

<img width="732" alt="스크린샷 2024-11-24 오후 5 24 01" src="https://github.com/user-attachments/assets/458d7e8e-b8c6-4707-b05d-8525ae4ad682">

애플리케이션 계층은 애플리케이션 서비스 안에 유스케이스를 구현하기 위해 도메인 엔티티에 접근한다. <br>
어댑터는 인커밍 포트를 통해 서비스에 접근하고, 반대로 서비스는 아웃고잉 포트를 통해 어댑터에 접근한다. <br>
설정 계층은 어댑터와 서비스 객체를 생성할 팩터리를 포함하고 있고, 의존성 주입 메커니즘을 제공한다.

## 접근 제한자

<img width="512" alt="스크린샷 2024-11-24 오후 5 26 51" src="https://github.com/user-attachments/assets/ce11e8a7-0a31-4e33-ba96-0ee7612fe693">

persistence 패키지에 있는 클래스들은 외부에서 접근할 필요가 없기 때문에 package-private(default)으로 만들 수 있다. <br>
같은 이유로 SendMoneyService를 package-private으로 만들 수 있다. <br>
나머지 클래스들은 아키텍처의 정의에 의해 public이어야 한다. domain 패키지는 다른 계층에서 접근할 수 있어야 하고, application 계층은 web 어댑터와 persistence 어댑터에서 접근 가능해야 한다.

## 빌드 아티팩트

빌드 도구의 주요한 기능 중 하나는 의존성 해결이다. <br>
어떤 코드베이스를 빌드 아티팩트로 변환하기 위해 빌드 도구가 가장 먼저 할 일은 코드베이스가 의존하고 있는 모든 아티팩트가 사용 가능한지 확인하는 것이다. <br>
이를 활용해서 모듈과 아키텍처의 계층 간의 의존성을 강제할 수 있다.

<img width="693" alt="스크린샷 2024-11-24 오후 5 30 27" src="https://github.com/user-attachments/assets/e845c04b-97f8-4ae1-b94c-42fd26bfe0c1">

빌드 모듈로 아키텍처 경계를 구분하는 것은 패키지로 구분하는 방식과 비교했을 때 몇 가지 장점이 있다.

- 빌드 도구가 순환 의존성을 싫어한다.
- 특정 모듈의 코드를 격리한 채로 변경할 수 있다.
- 모듈간 의존성이 빌드 스크립트에 분명하게 선언돼있기 때문에 새로 의존성을 추가하는 일은 우연이 아닌 의식적인 행동이 된다.





