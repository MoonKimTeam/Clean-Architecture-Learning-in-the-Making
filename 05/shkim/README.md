# 웹 어댑터 구현하기

우리가 목표로 하는 아키텍처에서 외부 세계와의 모든 커뮤니케이션은 어댑터를 통해 이뤄진다. <br>
따라서 이번에는 웹 인터페이스를 제공하는 어댑터의 구현 방법을 살펴보자.

## 의존성 역전

<img width="731" alt="스크린샷 2024-11-10 오후 3 26 29" src="https://github.com/user-attachments/assets/af674001-64ab-456d-93f9-ee41f16f76cc">

웹 어댑터는 외부로부터 요청을 받아 애플리케이션 코어를 호출하고 무슨 일을 해야 할지 알려준다. <br>
이때 제어 흐름은 웹 어댑터에 있는 컨트롤러에서 애플리케이션 계층에 있는 서비스로 흐른다. <br>
애플리케이션 계층은 웹 어댑터가 통신할 수 있는 특정 포트를 제공한다. 서비스는 이 포트를 구현하고, 웹 어댑터는 이 포트를 호출할 수 있다.

**그럼 왜 어댑터와 유스케이스 사이에 또 다른 간접 계층을 넣어야 할까?** <br>
애플리케이션 코어가 외부 세계와 통신할 수 있는 곳에 대한 명세가 포트이기 때문이다. <br>
포트를 적절한곳에 위치시키면 외부와 어떤 통신이 일어나고 있는지 정확히 알 수 있고, 이는 레거시 코드를 다루는 유지보수 엔지니어에게는 무척 소중한 정보다.

## 웹 어댑터의 책임

1. HTTP 요청을 자바 객체로 매핑
2. 권한 검사
3. 입력 유효성 검증
4. 입력을 유스케이스의 입력 모델로 매핑
5. 유스케이스 호출
6. 유스케이스의 출력을 HTTP로 매핑
7. HTTP 응답을 반환

## 컨트롤러 나누기

컨트롤러를 몇 개 만들어야 할까? 너무 적은 것보다는 너무 많은 게 낫다. <br>
각 컨트롤러가 가능한 한 좁고 다른 컨트롤러와 가능한 한 적게 공유하는 웹 어댑터 조각을 구현해야한다. 







